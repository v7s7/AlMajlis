/* ===========================
   Al Majlis — New Game Page (scoped, final)
   =========================== */

/* Tokens */
:root{
  --bg:#eaf2ff; --panel:#edf5ff; --card:#fff;
  --ink:#0f172a; --muted:#64748b;
  --accent:#1d4ed8; --accent-700:#1e40af; --accent-900:#1e3a8a;
  --ring:rgba(29,78,216,.28);
  --shadow-1:0 1px 2px rgba(0,0,0,.06), 0 6px 18px rgba(15,23,42,.08);
  --radius-lg:22px; --radius-md:14px; --radius-sm:10px;

  --fs-h2:clamp(20px,2.2vw,28px);
  --fs-h3:clamp(16px,1.6vw,22px);
  --fs-base:clamp(14px,1.2vw,18px);
  --fs-tile:clamp(14px,1.2vw,18px);

  --cat-aspect: 4/3; /* unified thumb aspect */
}

/* ===========================
   Global guards (no X-scroll)
   =========================== */
html,body{
  background:var(--bg); color:var(--ink);
  font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans Arabic","Noto Sans","Helvetica Neue",Arial,"Apple Color Emoji","Segoe UI Emoji";
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  -webkit-text-size-adjust:100%;
  width:100%; max-width:100%;
  overflow-x:hidden;             /* block sideways scroll globally */
}
*,*::before,*::after{ box-sizing:border-box; }
:focus-visible{ outline:none!important; box-shadow:0 0 0 4px var(--ring)!important; }
@media (prefers-reduced-motion: reduce){ *{ transition:none !important; animation:none !important; } }

/* =====================================================
   OVERRIDES: phones should scroll vertically on this page
   (these beat any global “landscape no-scroll” rules)
   ===================================================== */
@media (max-width: 900px){
  html, body{
    overflow-y:auto !important;      /* allow Y scroll */
    height:auto !important;          /* cancel 100vh locks */
    min-height:100dvh;               /* still fill viewport */
  }
}

/* Page wrapper */
.newgame{
  max-width:1440px; margin:24px auto 56px; padding:0 16px;
  overflow-x:hidden;                   /* extra guard */
  -webkit-overflow-scrolling: touch;   /* smooth iOS scroll */
  touch-action: pan-y;                 /* vertical only */
}
.newgame h2{
  font-size:var(--fs-h2); font-weight:800; letter-spacing:.2px; margin:0 0 18px; color:var(--accent-900);
}

/* Layout: single-column so Teams panel is last */
.newgame .newgame__layout{ display:block; }

/* Search */
.newgame .input-search{
  width:100%; height:52px; border-radius:12px; border:1px solid #c7d2fe;
  background:#fff; padding:0 14px; font-size:var(--fs-base); outline:none;
  transition:border-color .15s, box-shadow .15s, background .15s;
}
.newgame .input-search::placeholder{ color:var(--muted); }
.newgame .input-search:hover{ background:#fff; }
.newgame .input-search:focus{ border-color:var(--accent); box-shadow:0 0 0 4px var(--ring); }

/* Section */
.newgame .section{
  background:var(--panel); border-radius:28px; padding:18px 16px 22px;
  position:relative; box-shadow:inset 0 0 0 1px #dbeafe; margin-bottom:18px;
}
.newgame .section__title{ display:grid; place-items:center; margin:2px 0 16px; }
.newgame .section__title span{
  background:var(--accent); color:#fff; font-weight:800; font-size:var(--fs-base);
  line-height:40px; height:40px; padding:0 22px; border-radius:999px;
  box-shadow:0 6px 18px rgba(29,78,216,.18);
}

/* Category grid */
.newgame .category-grid{
  display:grid; gap:14px;
  grid-template-columns:repeat(6, minmax(0,1fr));
  align-items:stretch;
  min-width:0;                        /* prevents overflow from long labels */
}
@media (max-width:1280px){ .newgame .category-grid{ grid-template-columns:repeat(5,1fr); } }
@media (max-width:1100px){ .newgame .category-grid{ grid-template-columns:repeat(4,1fr); } }
@media (max-width:860px){  .newgame .category-grid{ grid-template-columns:repeat(3,1fr); } }
/* Phones: two columns, smaller gaps; scroll only down */
@media (max-width:640px){
  .newgame .category-grid{ grid-template-columns:repeat(2,1fr); gap:10px; }
}

/* Category card */
.newgame .category-card{
  position:relative; border-radius:var(--radius-lg); background:var(--card);
  box-shadow:var(--shadow-1); border:3px solid #dbeafe; padding:10px 10px 12px;
  cursor:pointer; text-align:start; transition:border-color .15s, box-shadow .15s, transform .03s;
  outline:none; display:grid; grid-template-rows:auto 46px;
  min-width:0;                         /* critical for no horizontal scroll */
}
.newgame .category-card:hover{ box-shadow:0 1px 3px rgba(0,0,0,.08), 0 12px 24px rgba(15,23,42,.10); }
.newgame .category-card:active{ transform:translateY(1px); }
.newgame .category-card:focus-visible{ box-shadow:0 0 0 4px var(--ring); }
.newgame .category-card.is-selected{ border-color:var(--accent); box-shadow:0 0 0 3px var(--ring), var(--shadow-1); }
.newgame .category-card:disabled{ opacity:.6; cursor:not-allowed; }

.newgame .category-card__image{
  width:100%;
  aspect-ratio: var(--cat-aspect);     /* 4:3 */
  object-fit: cover;
  display:block;
  border-radius: var(--radius-md);
  background:#e6efff;
}

/* Footer label chip — compact & legible on phones */
.newgame .category-card__footer{
  margin-top:8px; height:46px; border-radius:10px; background:var(--accent); color:#fff;
  display:grid; place-items:center; font-weight:800; letter-spacing:.2px;
  font-size:clamp(13px, 3.4vw, 18px);   /* small but clear on phones */
  text-align:center; padding:0 8px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap;
}
.newgame .category-card.is-selected .category-card__footer{
  background:linear-gradient(0deg, var(--accent) 0%, var(--accent-700) 100%);
  color:#ffffff !important;
}

/* Badges (optional) */
.newgame .badge{ position:absolute; z-index:2; display:inline-flex; align-items:center; justify-content:center; white-space:nowrap; user-select:none; }
.newgame .badge--info{
  inset:8px auto auto 8px; inline-size:26px; block-size:26px; border-radius:999px;
  background:var(--accent); color:#fff; font-weight:800; font-size:14px; box-shadow:0 2px 6px rgba(29,78,216,.25);
}
.newgame .badge--left,.newgame .badge--right{ top:6px; } 
.newgame .badge--right{ inset-inline-end:8px; } 
.newgame .badge--left{ inset-inline-start:8px; }
.newgame .badge--sparkle{
  background:#ef4444; color:#fff; padding:6px 10px; border-radius:12px; font-size:12px; font-weight:800;
  box-shadow:0 2px 6px rgba(239,68,68,.25);
}
.newgame .badge--sparkle::before,.newgame .badge--sparkle::after{ content:"✦"; font-size:12px; margin:0 6px; opacity:.95; }

/* Chips (selected categories) */
.newgame .chip{
  display:inline-flex; align-items:center; gap:8px; min-height:36px; padding:6px 12px;
  border-radius:999px; border:1px solid #c7d2fe; background:#fff; color:var(--ink);
  font-weight:800; font-size:clamp(16px, 1.3vw, 18px); cursor:pointer;
  transition:filter .15s, transform .03s, box-shadow .15s, border-color .15s;
  box-shadow:0 1px 2px rgba(0,0,0,.04);
  white-space:nowrap; max-width:100%; overflow:hidden; text-overflow:ellipsis;
}
.newgame .chip:hover{ filter:brightness(1.02); }
.newgame .chip:active{ transform:translateY(1px); }
.newgame .chip:focus-visible{ box-shadow:0 0 0 4px var(--ring); }
.newgame .chip--selected{
  border-color:var(--accent-700); background:var(--accent); color:#fff !important; 
  box-shadow:0 8px 20px rgba(29,78,216,.18);
}
/* RTL friendliness */
[dir="rtl"] .newgame .chip--selected{ padding-inline-start:14px; }

/* Optional progress bar */
.newgame .progress{ inline-size:100%; block-size:10px; border-radius:999px; background:#e6efff; box-shadow:inset 0 0 0 1px #dbeafe; overflow:hidden; }
.newgame .progress__bar{ block-size:100%; background:var(--accent); border-radius:999px; transition:inline-size .25s ease; box-shadow:0 6px 14px rgba(29,78,216,.22); }

/* Teams panel (bottom) */
.newgame .panel{
  background:var(--card); border:1px solid #dbeafe; border-radius:28px;
  box-shadow:var(--shadow-1); padding:16px; margin-top:18px;
  max-width:560px; margin-inline:auto;
}
.newgame .panel h3{ font-size:var(--fs-h3); margin:0 0 10px; font-weight:700; color:var(--accent-900); }

/* Inputs */
.newgame .panel .auth-input{
  width:100%; height:52px; border-radius:14px; padding:0 14px; font-size:var(--fs-base); color:var(--ink);
  background:#f8fbff; border:1px solid #c7d2fe;
  box-shadow:inset 0 1px 0 rgba(255,255,255,.6), 0 6px 18px rgba(15,23,42,.06);
  outline:none; transition:border-color .15s ease, box-shadow .15s ease, background .15s ease;
}
.newgame .panel .auth-input::placeholder{ color:var(--muted); opacity:.9; }
.newgame .panel .auth-input:hover{ background:#fff; }
.newgame .panel .auth-input:focus{
  background:#fff; border-color:var(--accent);
  box-shadow:0 0 0 4px var(--ring), 0 10px 22px rgba(29,78,216,.10);
}
.newgame .panel .auth-input:disabled{ background:#eef4ff; color:var(--muted); cursor:not-allowed; }

/* Stacked labels */
.newgame .panel .field{ display:block; }
.newgame .panel .field__label{
  display:block; margin:8px 2px 6px; font-weight:800; color:var(--accent-900);
  font-size:calc(var(--fs-base) - 1px);
}

/* Buttons */
.newgame .btn{
  display:inline-flex; align-items:center; justify-content:center;
  min-height:48px; padding:0 16px; border-radius:12px;
  border:1px solid var(--accent-700); background:var(--accent); color:#fff;
  font-weight:800; font-size:var(--fs-base); cursor:pointer;
  transition:filter .15s, transform .03s, box-shadow .15s;
  box-shadow:0 10px 24px rgba(29,78,216,.18);
}
.newgame .btn:disabled{ opacity:.6; cursor:not-allowed; }
.newgame .btn:hover{ filter:brightness(1.03); }
.newgame .btn:active{ transform:translateY(1px); }
.newgame .panel .btn{ width:100%; }

/* Utilities */
.newgame .mt-8{ margin-top:8px; } .newgame .mt-12{ margin-top:12px; } .newgame .mt-16{ margin-top:16px; }
.newgame .center{ display:grid; place-items:center; }
.newgame .note{ color:var(--muted); font-size:var(--fs-base); }

/* Phone-specific tweaks */
@media (max-width:520px){ .newgame .panel{ max-width:360px; } }
@media (max-width:420px){
  :root{ --fs-tile:14px; }
  .newgame .panel{ max-width:100%; }
  .newgame .category-card{ border-width:2px; padding:8px 8px 10px; grid-template-rows:auto 40px; }
  .newgame .category-card__footer{ height:40px; font-size:clamp(12px,3.6vw,16px); }
}

/* RTL tweaks */
[dir="rtl"] .newgame .badge--left{ inset-inline-start:8px; inset-inline-end:auto; }
[dir="rtl"] .newgame .badge--right{ inset-inline-end:8px; inset-inline-start:auto; }

/* Thumbnails & content images */
.newgame .img--thumb{
  width:100%; aspect-ratio:4/3; object-fit:cover; border-radius:var(--radius-md); background:#f0f4ff;
}
.newgame .img--content{
  width:100%; max-width:800px; aspect-ratio:16/9; object-fit:contain; background:#f0f4ff;
  border-radius:var(--radius-md); margin:0 auto; display:block;
}

/* --- Rotate overlay (unchanged) --- */
.rotate-overlay{
  position: fixed;
  inset: 0;
  background: #0b1224;
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 24px;
  z-index: 99999;
}
@media (orientation: landscape){
  .rotate-overlay{ display: none; }
}
.rotate-card{
  width: min(92vw, 520px);
  background: linear-gradient(180deg, #1d4ed8 0%, #1e40af 100%);
  border: 2px solid #93c5fd;
  border-radius: 20px;
  box-shadow: 0 10px 30px rgba(2,6,23,.5);
  padding: 20px 18px;
  text-align: center;
}
.rotate-icon{ font-size: 44px; margin-bottom: 8px; }
.rotate-title{ margin: 0 0 6px; font-weight: 900; }
.rotate-text{ margin: 0 0 14px; opacity: .95; }
.rotate-btn{
  display: inline-flex; align-items: center; justify-content: center;
  min-height: 44px; padding: 0 16px;
  border-radius: 12px; border: 1px solid #1e3a8a;
  background: #0ea5e9; color: #fff; font-weight: 800; cursor: pointer;
  box-shadow: 0 10px 24px rgba(14,165,233,.25);
}
.rotate-btn:disabled{ opacity:.6; cursor:not-allowed; }
.rotate-note{ margin: 10px 0 0; font-size: 14px; opacity: .9; }
/* ===== Phones (esp. iPhone) in LANDSCAPE: 6-up compact grid ===== */
@media (max-width: 900px) and (orientation: landscape) {
  /* grid: 6 columns, tight gaps, no horizontal overflow */
  .newgame .category-grid{
    grid-template-columns: repeat(6, minmax(0, 1fr)) !important;
    gap: 8px !important;
    min-width: 0 !important;
  }

  /* smaller cards */
  .newgame .category-card{
    padding: 6px !important;
    border-width: 2px !important;
    grid-template-rows: auto 30px !important;      /* image + short footer */
    min-width: 0 !important;                       /* prevent overflow */
  }

  .newgame .category-card__image{
    border-radius: 8px !important;
  }

  /* compact footer chip (still readable) */
  .newgame .category-card__footer{
    height: 28px !important;
    font-size: 11px !important;                    /* clear but small */
    padding: 0 6px !important;
    letter-spacing: 0.2px !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
  }

  /* slightly tighter section padding so 6-up fits cleanly */
  .newgame .section{ padding: 12px !important; }
}

/* ===== Very small/squat landscape (e.g., 844×390, 736×414) ===== */
@media (max-width: 740px) and (max-height: 420px) and (orientation: landscape){
  .newgame .category-grid{ gap: 6px !important; }
  .newgame .category-card{ padding: 5px !important; grid-template-rows: auto 26px !important; }
  .newgame .category-card__footer{ height: 24px !important; font-size: 10px !important; padding: 0 4px !important; }
}

/* ===== Portrait phones that still want smaller cards (optional) ===== */
@media (max-width: 420px) and (orientation: portrait){
  .newgame .category-grid{ grid-template-columns: repeat(3, 1fr) !important; gap: 8px !important; }
  .newgame .category-card{ padding: 6px !important; border-width: 2px !important; grid-template-rows: auto 28px !important; }
  .newgame .category-card__footer{ height: 26px !important; font-size: 11px !important; }
}
